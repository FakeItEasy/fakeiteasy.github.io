
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../changing-behavior-between-calls/">
      
      
        <link rel="next" href="../assertion/">
      
      
      <link rel="icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Argument constraints - FakeItEasy</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/fakeiteasy.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#argument-constraints" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="FakeItEasy" class="md-header__button md-logo" aria-label="FakeItEasy" data-md-component="logo">
      
  <img src="../img/icon.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            FakeItEasy
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Argument constraints
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/FakeItEasy/FakeItEasy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="FakeItEasy" class="md-nav__button md-logo" aria-label="FakeItEasy" data-md-component="logo">
      
  <img src="../img/icon.svg" alt="logo">

    </a>
    FakeItEasy
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/FakeItEasy/FakeItEasy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FakeItEasy
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quickstart
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Creating Fakes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Creating Fakes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../creating-fakes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating Fakes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../what-can-be-faked/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    What can be faked
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../default-fake-behavior/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Default fake behavior
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../how-to-fake-internal-types/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How to fake internal (Friend in VB) types
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Specifying Fakes’ Behavior
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Specifying Fakes’ Behavior
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specifying-a-call-to-configure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Specifying a Call to Configure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specifying-return-values/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Specifying Return Values
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../throwing-exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Throwing Exceptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../doing-nothing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Doing Nothing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assigning-out-and-ref-parameters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Assigning out and ref parameters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../invoking-custom-code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Invoking Custom Code
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../calling-base-methods/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Calling base methods
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../calling-wrapped-methods/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Calling wrapped methods
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../changing-behavior-between-calls/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Changing behavior between calls
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Argument constraints
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Argument constraints
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#matching-values-exactly" class="md-nav__link">
    <span class="md-ellipsis">
      Matching values exactly
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-matchers" class="md-nav__link">
    <span class="md-ellipsis">
      Other matchers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Other matchers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ignoring-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Ignoring arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-convenience-matchers" class="md-nav__link">
    <span class="md-ellipsis">
      More convenience matchers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-matching" class="md-nav__link">
    <span class="md-ellipsis">
      Custom matching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#always-place-ignored-and-that-inside-acallto" class="md-nav__link">
    <span class="md-ellipsis">
      Always place Ignored and That inside A.CallTo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-correct-grammar" class="md-nav__link">
    <span class="md-ellipsis">
      Using correct grammar
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#out-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      out parameters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ref-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      ref parameters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arguments-of-anonymous-types" class="md-nav__link">
    <span class="md-ellipsis">
      Arguments of anonymous types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overriding-argument-matchers" class="md-nav__link">
    <span class="md-ellipsis">
      Overriding argument matchers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#capturing-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Capturing arguments
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nested-argument-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Nested argument constraints
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Assertion
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Assertion
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assertion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Assertion
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ordered-assertions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Ordered assertions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../capturing-arguments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Capturing arguments
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faking-async-methods/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Faking async methods
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../raising-events/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Raising events
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../strict-fakes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Strict fakes
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Dummies
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Dummies
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dummies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dummies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../custom-dummy-creation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom Dummy Creation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../implicit-creation-options/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Implicit Creation Options
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../formatting-argument-values/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Formatting Argument Values
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../custom-argument-equality/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Custom Argument Equality
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../scanning-for-extension-points/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Scanning for Extension Points
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../bootstrapper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bootstrapper
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../advanced-usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Advanced usage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://fakeiteasy.github.io/docs/analyzers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Analyzer Packages
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_19" >
        
          
          <label class="md-nav__link" for="__nav_19" id="__nav_19_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Recipes
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_19_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_19">
            <span class="md-nav__icon md-icon"></span>
            Recipes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Recipes/faking-http-client/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Faking HttpClient
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../platform-support/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Platform support
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../how-to-build/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How to build
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../why-was-fakeiteasy-created/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Why was FakeItEasy created?
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../external-resources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    External Resources
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#matching-values-exactly" class="md-nav__link">
    <span class="md-ellipsis">
      Matching values exactly
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-matchers" class="md-nav__link">
    <span class="md-ellipsis">
      Other matchers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Other matchers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ignoring-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Ignoring arguments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#more-convenience-matchers" class="md-nav__link">
    <span class="md-ellipsis">
      More convenience matchers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-matching" class="md-nav__link">
    <span class="md-ellipsis">
      Custom matching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#always-place-ignored-and-that-inside-acallto" class="md-nav__link">
    <span class="md-ellipsis">
      Always place Ignored and That inside A.CallTo
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-correct-grammar" class="md-nav__link">
    <span class="md-ellipsis">
      Using correct grammar
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#out-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      out parameters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ref-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      ref parameters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arguments-of-anonymous-types" class="md-nav__link">
    <span class="md-ellipsis">
      Arguments of anonymous types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overriding-argument-matchers" class="md-nav__link">
    <span class="md-ellipsis">
      Overriding argument matchers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#capturing-arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Capturing arguments
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nested-argument-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      Nested argument constraints
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="argument-constraints">Argument constraints</h1>
<p>When configuring and <a href="../assertion/">asserting</a> calls in FakeItEasy,
the arguments of the call can be constrained so that only calls to the
configured method where the arguments matches the constraint are
selected.</p>
<h2 id="matching-values-exactly">Matching values exactly</h2>
<p>Assume the following interface exists:
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">public</span><span class="w"> </span><span class="k">interface</span><span class="w"> </span><span class="n">IFoo</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="p">{</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="k">void</span><span class="w"> </span><span class="nf">Bar</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="p">}</span>
</code></pre></div></p>
<p>Then the arguments to Bar can be constrained to limit call matching:
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kt">var</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="p">.</span><span class="n">Fake</span><span class="o">&lt;</span><span class="n">IFoo</span><span class="o">&gt;</span><span class="p">();</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">A</span><span class="p">.</span><span class="n">CallTo</span><span class="p">(()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">Bar</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">17</span><span class="p">)).</span><span class="n">MustHaveHappened</span><span class="p">();</span>
</code></pre></div></p>
<p>Then FakeItEasy will look <em>only</em> for calls made with the arguments
<code>"hello"</code> and <code>17</code> - no other calls will match the rule.</p>
<p>When checking for argument equality, FakeItEasy uses the first applicable equality
test from this list:</p>
<ul>
<li>if both values are <code>null</code>, they are considered equal,</li>
<li>if one value is <code>null</code> and the other isn't, they are not considered equal,</li>
<li>the highest-priority <a href="../custom-argument-equality/">custom argument equality comparer</a>
  that can compare the example object's type, or</li>
<li>if both values are <code>string</code>, <code>string.Equals</code> (as an optimization),</li>
<li>if the example object's type implements <code>System.Collections.IEnumerable</code>, the values
  are considered equal if and only if the actual object's type also implements
  <code>System.Collections.IEnumerable</code> and <code>System.Linq.Enumerable.SequenceEqual</code> evaluates
  to true, or</li>
<li><code>Object.Equals</code></li>
</ul>
<p>If this list is not satisfactory, you may have to use the <code>That.Matches</code>
method described in <a href="#custom-matching">Custom matching</a>. Be
particularly careful of types whose <code>Equals</code> methods perform reference
equality rather than value equality. In that case, the objects have to
be <em>the same object</em> in order to match, and this sometimes produces
unexpected results. When in doubt, verify the type's <code>Equals</code>
behavior manually.</p>
<h2 id="other-matchers">Other matchers</h2>
<h3 id="ignoring-arguments">Ignoring arguments</h3>
<p>Suppose the value of the integer in the <code>Bar</code> call wasn't important,
but the string was. Then the following constraint could be used:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">A</span><span class="p">.</span><span class="n">CallTo</span><span class="p">(()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">Bar</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">.</span><span class="n">Ignored</span><span class="p">)).</span><span class="n">MustHaveHappened</span><span class="p">();</span>
</code></pre></div>
<p>Then any call will match, so long as the string value was
<code>"hello"</code>. The <code>Ignored</code> property can be used on any type.</p>
<p>An underscore (<code>_</code>) can be used as a shorthand for <code>Ignored</code> as well:
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">A</span><span class="p">.</span><span class="n">CallTo</span><span class="p">(()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">Bar</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">.</span><span class="n">_</span><span class="p">)).</span><span class="n">MustHaveHappened</span><span class="p">();</span>
</code></pre></div></p>
<h3 id="more-convenience-matchers">More convenience matchers</h3>
<p>If more complicated constraints are needed, the <code>That</code> method can be
used. There are a few built-in matchers:</p>
<table>
<thead>
<tr>
<th style="text-align: left;">Matcher</th>
<th style="text-align: left;">Tests for</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">IsNull()</td>
<td style="text-align: left;"><code>null</code></td>
</tr>
<tr>
<td style="text-align: left;">IsNotNull()</td>
<td style="text-align: left;">not <code>null</code></td>
</tr>
<tr>
<td style="text-align: left;">IsEqualTo(other)</td>
<td style="text-align: left;">object equality using <code>object.Equals</code></td>
</tr>
<tr>
<td style="text-align: left;">IsEqualTo(other, equalityComparer)</td>
<td style="text-align: left;">object equality using <code>equalityComparer.Equals</code></td>
</tr>
<tr>
<td style="text-align: left;">IsSameAs(other)</td>
<td style="text-align: left;">object identity - like <code>object.ReferenceEquals</code></td>
</tr>
<tr>
<td style="text-align: left;">IsInstanceOf(type)</td>
<td style="text-align: left;">an argument that can be assigned to a variable of type <code>type</code></td>
</tr>
<tr>
<td style="text-align: left;">Contains(string)</td>
<td style="text-align: left;">substring match with ordinal string comparison</td>
</tr>
<tr>
<td style="text-align: left;">Contains(string, comparisonType)</td>
<td style="text-align: left;">substring match with the specified comparison type</td>
</tr>
<tr>
<td style="text-align: left;">StartsWith(string)</td>
<td style="text-align: left;">substring at beginning of string with ordinal string comparison</td>
</tr>
<tr>
<td style="text-align: left;">StartsWith(string, comparisonType)</td>
<td style="text-align: left;">substring at beginning of string with the specified comparison type</td>
</tr>
<tr>
<td style="text-align: left;">EndsWith(string)</td>
<td style="text-align: left;">substring at end of string with ordinal string comparison</td>
</tr>
<tr>
<td style="text-align: left;">EndsWith(string, comparisonType)</td>
<td style="text-align: left;">substring at end of string with the specified comparison type</td>
</tr>
<tr>
<td style="text-align: left;">IsNullOrEmpty()</td>
<td style="text-align: left;"><code>null</code> or <code>""</code></td>
</tr>
<tr>
<td style="text-align: left;">IsEmpty()</td>
<td style="text-align: left;">empty enumerable</td>
</tr>
<tr>
<td style="text-align: left;">Contains(element)</td>
<td style="text-align: left;">element's presence in an enumerable</td>
</tr>
<tr>
<td style="text-align: left;">IsSameSequenceAs(enumerable)</td>
<td style="text-align: left;">sequence equality, like <code>System.Linq.Enumerable.SequenceEqual</code></td>
</tr>
<tr>
<td style="text-align: left;">IsSameSequenceAs(value1, value2, ...)</td>
<td style="text-align: left;">sequence equality, like <code>System.Linq.Enumerable.SequenceEqual</code></td>
</tr>
<tr>
<td style="text-align: left;">HasSameElementsAs(enumerable)</td>
<td style="text-align: left;"><a href="https://en.wikipedia.org/wiki/Multiset">multiset</a> equality - same elements, any order</td>
</tr>
<tr>
<td style="text-align: left;">HasSameElementsAs(value1, value2, ...)</td>
<td style="text-align: left;"><a href="https://en.wikipedia.org/wiki/Multiset">multiset</a> equality - same elements, any order</td>
</tr>
<tr>
<td style="text-align: left;">Not</td>
<td style="text-align: left;">inverts the sense of the matcher</td>
</tr>
</tbody>
</table>
<h3 id="custom-matching">Custom matching</h3>
<p>If none of the canned matchers are sufficient, you can provide a
predicate to perform custom matching using <code>That.Matches</code>. Like in
this rather contrived example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">A</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">.</span><span class="n">That</span><span class="p">.</span><span class="n">Matches</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">&#39;X&#39;</span><span class="p">);</span>
</code></pre></div>
<p>FakeItEasy will evaluate the predicate against any supplied
argument. The predicate can be supplied as an <code>Expression&lt;Func&lt;T, bool&gt;&gt;</code>
or as a <code>Func&lt;T, bool&gt;</code>. FakeItEasy can generate a description
of the matcher when an <code>Expression</code> is supplied (although you may
supply your own as well), but you must supply a description when using
a <code>Func</code>.</p>
<h3 id="always-place-ignored-and-that-inside-acallto">Always place <code>Ignored</code> and <code>That</code> inside <code>A.CallTo</code></h3>
<p>The <code>Ignored</code> (and <code>_</code>) and <code>That</code> matchers must be placed within the
expression inside the <code>A.CallTo</code> call. This is because these special
constraint methods do not return an actual matcher object. They tell
FakeItEasy how to match the parameter via a special event that's fired
when the constraint method is invoked. FakeItEasy only listens to the
events in the context of an <code>A.CallTo</code>.</p>
<p>So, tempting as it might be to save one of the constraints away in a
handy variable, don't do it.</p>
<h2 id="using-correct-grammar">Using correct grammar</h2>
<p>FakeItEasy's API attempts to imitate the English language, so that call
configurations and assertions read naturally. In that spirit, it's
possible to use <code>An&lt;T&gt;</code> instead of <code>A&lt;T&gt;</code> for types whose name starts
with a vowel sound. For instance:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">An</span><span class="o">&lt;</span><span class="n">Apple</span><span class="o">&gt;</span><span class="p">.</span><span class="n">That</span><span class="p">.</span><span class="n">Matches</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">a</span><span class="p">.</span><span class="n">Color</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;Red&quot;</span><span class="p">)</span>
</code></pre></div>
<p><code>A&lt;T&gt;</code> and <code>An&lt;T&gt;</code> are exact synonyms and can be used exactly the same
way.</p>
<h2 id="out-parameters"><code>out</code> parameters</h2>
<p>The incoming argument value of <code>out</code> parameters is ignored when matching
calls. The incoming value of an <code>out</code> parameter can't be seen by the
method body anyhow, so there's no advantage to constraining by it.</p>
<p>For example, this test passes:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kt">string</span><span class="w"> </span><span class="n">configurationValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;lollipop&quot;</span><span class="p">;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="n">A</span><span class="p">.</span><span class="n">CallTo</span><span class="p">(()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">aFakeDictionary</span><span class="p">.</span><span class="n">TryGetValue</span><span class="p">(</span><span class="n">theKey</span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="n">configurationValue</span><span class="p">))</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w"> </span><span class="p">.</span><span class="n">Returns</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="kt">string</span><span class="w"> </span><span class="n">fetchedValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;licorice&quot;</span><span class="p">;</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="kt">var</span><span class="w"> </span><span class="n">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">aFakeDictionary</span><span class="p">.</span><span class="n">TryGetValue</span><span class="p">(</span><span class="n">theKey</span><span class="p">,</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="n">fetchedValue</span><span class="p">);</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="n">Assert</span><span class="p">.</span><span class="n">That</span><span class="p">(</span><span class="n">success</span><span class="p">,</span><span class="w"> </span><span class="n">Is</span><span class="p">.</span><span class="n">True</span><span class="p">);</span>
</code></pre></div>
<p>See
<a href="../assigning-out-and-ref-parameters/#implicitly-assigning-out-parameter-values">Implicitly Assigning <code>out</code> Parameter Values</a>
to learn how the initial <code>configurationValue</code> is used in this case.</p>
<h2 id="ref-parameters"><code>ref</code> parameters</h2>
<p>Due to the limitations of working with <code>ref</code> parameters in C#, only exact-value matching is possible using argument constraints,
and the argument value must be compared against a local variable or a field:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">someValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="n">A</span><span class="p">.</span><span class="n">CallTo</span><span class="p">(()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">aFake</span><span class="p">.</span><span class="n">aMethod</span><span class="p">(</span><span class="k">ref</span><span class="w"> </span><span class="n">someValue</span><span class="p">)).</span><span class="n">Returns</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
</code></pre></div>
<p>To perform more sophisticated matching of <code>ref</code> parameter values in C#, use constraints that work on the entire call, such as <code>WithAnyArguments</code>
or <code>WhenArgumentsMatch</code>, described below.</p>
<p>In addition to constraining by <code>ref</code> argument values, calls can be explicitly configured to
<a href="../assigning-out-and-ref-parameters/">assign outgoing <code>ref</code> argument values</a>.</p>
<h2 id="arguments-of-anonymous-types">Arguments of anonymous types</h2>
<p>Anonymous types are not shared between assemblies, so it's not possible to make an argument
constraint that matches an anonymous type from another assembly. Instead, you may use
<code>A.CallTo(fake).Where(...)</code> as described in
<a href="../specifying-a-call-to-configure/#specifying-a-call-to-any-method-or-property">Specifying a call to any method or property</a>.</p>
<h2 id="overriding-argument-matchers">Overriding argument matchers</h2>
<p>Sometimes individually constraining arguments isn't sufficient. In
such a case, other methods may be used to determine which calls match
the fake's configuration.</p>
<p><em>When using the following methods, any inline argument constraints are ignored, and only the
special method is used to match the call.</em> Some arguments have to be supplied in order to satisfy the compiler,
but the values will not be used, so you can supply whatever values make the code easiest for you to read.</p>
<p><code>WithAnyArguments</code> ensures that no argument constraints will be applied when matching calls:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="n">A</span><span class="p">.</span><span class="n">CallTo</span><span class="p">(()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">foo</span><span class="p">.</span><span class="n">Bar</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">)).</span><span class="n">WithAnyArguments</span><span class="p">().</span><span class="n">MustHaveHappened</span><span class="p">();</span>
</code></pre></div>
<p>The example above will match any call to <code>foo.Bar</code>, regardless of the arguments. The
<code>Ignored</code> property performs the same task, and is more flexible, but
some people prefer the look of <code>WithAnyArguments</code>.</p>
<p><code>WhenArgumentsMatch</code> accepts a predicate that operates on the entire
collection of call arguments.  For example, to have a Fake throw an
exception when a call is made to <code>Bar</code> where the first arguments is a
string representation of the second, use</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">A</span><span class="p">.</span><span class="n">CallTo</span><span class="p">(()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">fake</span><span class="p">.</span><span class="n">Bar</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">    </span><span class="p">.</span><span class="n">WhenArgumentsMatch</span><span class="p">(</span><span class="n">args</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">        </span><span class="n">args</span><span class="p">.</span><span class="n">Get</span><span class="o">&lt;</span><span class="kt">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;theString&quot;</span><span class="p">)</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">            </span><span class="p">.</span><span class="n">Equals</span><span class="p">(</span><span class="n">args</span><span class="p">.</span><span class="n">Get</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;theInt&quot;</span><span class="p">).</span><span class="n">ToString</span><span class="p">()))</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="p">.</span><span class="n">Throws</span><span class="o">&lt;</span><span class="n">Exception</span><span class="o">&gt;</span><span class="p">();</span>
</code></pre></div>
<p>Strongly typed overloads of <code>WhenArgumentsMatch</code> are also available for methods of up to 8
parameters (if a method has more parameters, use the variant described above):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">A</span><span class="p">.</span><span class="n">CallTo</span><span class="p">(()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">fake</span><span class="p">.</span><span class="n">Bar</span><span class="p">(</span><span class="k">null</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">    </span><span class="p">.</span><span class="n">WhenArgumentsMatch</span><span class="p">((</span><span class="kt">string</span><span class="w"> </span><span class="n">theString</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">theInt</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">        </span><span class="n">theString</span><span class="p">.</span><span class="n">Equals</span><span class="p">(</span><span class="n">theInt</span><span class="p">.</span><span class="n">ToString</span><span class="p">()))</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="p">.</span><span class="n">Throws</span><span class="o">&lt;</span><span class="n">Exception</span><span class="o">&gt;</span><span class="p">();</span>
</code></pre></div>
<h2 id="capturing-arguments">Capturing arguments</h2>
<p>It is also possible to <a href="../capturing-arguments/">capture arguments passed to a call</a>, whether you
also want to constrain those arguments or not, and verify the passed values after the fact.</p>
<h2 id="nested-argument-constraints">Nested argument constraints</h2>
<p>Note that an argument constraint cannot be "nested" in an argument; the
constraint has to be the whole argument. For instance, the following call
configurations are invalid and will throw an exception:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>A.CallTo(() =&gt; fake.Foo(new Bar(A&lt;int&gt;._))).Returns(42);
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>A.CallTo(() =&gt; fake.Foo(new Bar { X = A&lt;string&gt;.That.Contains(&quot;hello&quot;) })).Returns(42);
</code></pre></div>
<p>To achieve the desired effect, you can do this instead:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>A.CallTo(() =&gt; fake.Foo(A&lt;Bar&gt;._)).Returns(42);
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>A.CallTo(() =&gt; fake.Foo(A&lt;Bar&gt;.That.Matches(bar =&gt; bar.X.Contains(&quot;hello&quot;)))).Returns(42);
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../changing-behavior-between-calls/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Changing behavior between calls">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Changing behavior between calls
              </div>
            </div>
          </a>
        
        
          
          <a href="../assertion/" class="md-footer__link md-footer__link--next" aria-label="Next: Assertion">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Assertion
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.footer"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>